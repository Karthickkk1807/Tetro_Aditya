@{
    UserAccessOption access = GenericTetroONE.GetUserAccessSession(UserScreen.UserAccess, Context.Session);
}
<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="~/assets/css/dashboard.css" rel="stylesheet" />
<link href="~/assets/css/daterangepicker.min.css" rel="stylesheet" />

<style>
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    }

    .stat-card {
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        transition: transform 0.2s;
    }

        .stat-card:hover {
            transform: translateY(-5px);
        }

    .chart-container {
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        padding: 1.5rem;
        margin-bottom: 1rem;
        min-height: fit-content;
    }

    .stat-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .bg-light-blue {
        background-color: #eef2ff;
    }

    .bg-light-green {
        background-color: #ecfdf5;
    }

    .bg-light-purple {
        background-color: #f5f3ff;
    }

    .bg-light-orange {
        background-color: #fff7ed;
    }

    .text-primary-dark {
        color: #4338ca;
    }

    .text-success-dark {
        color: #065f46;
    }

    .text-purple-dark {
        color: #6d28d9;
    }

    .text-orange-dark {
        color: #9a3412;
    }

    .progress {
        height: 6px;
    }

    #productionChart {
        height: 230px !important;
    }

    #flavorChart {
        height: 230px !important;
    }

    #salesChart {
        height: 230px !important;
    }



    #areaDistributionChart {
        height: 230px !important;
    }

    #payrollOverviewChart {
        height: 250px !important;
    }

    #ticketSpeedometerChart {
        height: 300px !important;
    }

    #paymentExpenseChart {
        height: 250px !important;
    }


    .gauge-box {
        text-align: center;
    }

        .gauge-box canvas {
            width: 230px;
            height: 98px !important;
        }

    .status-label {
        font-weight: bold;
        margin-top: -10px;
        font-size: 16px;
    }

    .text-success {
        color: #28a745;
    }

    .text-danger {
        color: #dc3545;
    }

    #assetDoughnutChart {
        height: 250px !important;
    }

    #individualDistributorChart {
        /*    height:250px !important;
           width:350px !important; */
        margin-top: -50px !important;
    }

    #individualChartContainer {
        height: 230px !important;
    }

    #notificationStatusChart {
        height: 327px !important;
    }


    .action_btns a {
        text-decoration: none;
        color: #000;
        font-size: 14px;
    }

    .action_btn i {
        width: 18px;
    }

    .show-menu {
        display: block !important;
    }

    .chart-header {
        background-color: #f0f0f0;
        padding: 0.5rem !important;
        border-bottom: 1px solid #ddd;
        margin: -24px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        border-top-left-radius: 0.375rem;
        border-top-right-radius: 0.375rem;
    }

    .notificationchart {
        height: 253px !important;
    }

</style>

<div class="container-fluid">

    <div class="row justify-content-end align-items-center mt--1 mb-3">
        <div class="col-lg-2 col-md-6 col-sm-6 col-6" style="margin-right: -51px;margin-top: -4px;">
            <select class="form-control" id="DashboardDrop" name="DashboardDrop" onchange="location.href = this.value;">
                <option value="@Url.Action("Dashboard", "Dashboard")">Current Dashboard</option>
                <option value="@Url.Action("NewDashboard", "NewDashboard")">New Dashboard</option>
            </select>

        </div>
        <div class="col-lg-3 col-md-6 col-sm-6 col-6 d-flex justify-content-end p-0">
            <div class="form-group">
                <div id="reportrange" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc; width: 100%;color: #a9a8a8;">
                    <i class="fa fa-calendar"></i>&nbsp;
                    <span>No Date</span>  <i class="fa fa-caret-down"></i>

                </div>
                <label id="reportrange-error" class="error" for="reportrange" style="display: none;">This field is required.</label>

            </div>
        </div>

        <div class="col-lg-1 col-md-4 col-sm-6 col-6 mt--1">
            <select id="DaysDropDown" class="form-control" aria-label="Select default day option" style="width: 100%;">
            </select>
        </div>


    </div>
    <!-- Stats Cards -->
    <div class="row g-4 mb-4">
        <div class="col-md-6 col-lg-3">
            <div id="TotalProductionCard" class="stat-card  p-2">


                <!-- Inline Label and Count -->
                <div class="d-flex align-items-center justify-content-between mb-2">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-flask text-primary-dark me-2" style="margin-right:10px"></i>
                        <h6 class="text-muted mb-0 me-3">Total Production</h6>
                    </div>
                    <div class="text-end">
                        <h3 class="mb-0" id="TotalProduction"></h3>
                    </div>
                </div>

                <div class="d-flex justify-content-between align-items-center">
                    <small class="text-muted">bottles</small>
                    <small>
                        <span class="fw-bold" id="TodayProduction"></span>

                    </small>
                </div>

                <div class="progress mt-3">
                    <div class="progress-bar"></div>
                </div>

                <small class="mt-2 d-block">
                    <span id="ProductionSymbol"></span> <span id="ProductionPercentage"></span>
                </small>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div id="TotalRevenueCard" class="stat-card p-2">


                <!-- Inline Icon + Label + Value -->
                <div class="d-flex align-items-center justify-content-between mb-2">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-chart-line text-purple-dark me-2" style="margin-right:10px"></i>
                        <h6 class="text-muted mb-0 me-3">Revenue</h6>
                    </div>
                    <div class="text-end">
                        <h3 class="mb-0" id="TotalRevenue"></h3>
                    </div>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <small class="text-muted">avg rate</small>
                    <small>
                        <span id="TotalProfit"></span>
                    </small>
                </div>


                <div class="progress mt-3">
                    <div class="progress-bar"></div>
                </div>

                <small class="mt-2 d-block">
                    <span id="ProfitLossSymbol"></span><span id="ProfitLossPercent"></span>
                </small>

            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div id="TotalEfficiencyCard" class="stat-card p-2">

                <div class="d-flex align-items-center justify-content-between mb-2">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-chart-line text-purple-dark me-2" style="margin-right:10px"></i>
                        <h6 class="text-muted mb-0 me-3">Efficiency</h6>
                    </div>
                    <div class="text-end">
                        <h3 class="mb-0" id="TotalEfficiency"></h3>
                    </div>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <small class="text-muted">avg rate</small>
                    <small>
                        <span class="fw-bold" id="AveragePercentage"></span>
                    </small>
                </div>


                <div class="progress mt-3">
                    <div class="progress-bar"></div>
                </div>

                <small class="mt-2 d-block">
                    <span id="IncrementSymbol"></span> <span id="IncrementPercentage"></span>
                </small>

            </div>

        </div>
        <div class="col-md-6 col-lg-3">
            <h6 class="text-center mb-0 me-3">Active Employees</h6>
            <!-- Very Small Doughnut Chart -->
            <div class="d-flex justify-content-center mt-2">
                <canvas id="employeeDoughnutChart" width="120" height="100"></canvas>
            </div>
        </div>
    </div>
     
    <!-- Charts -->
    <div class="row mb-2 mt-3">
        <div class="col-lg-5">
            <div class="chart-container border rounded">
                <div class="d-flex justify-content-between align-items-center chart-header mb-4">
                    <h5 class="card-title mb-0 mt--1" style="font-size:15px">Production Trends</h5>
                </div>
                <canvas id="productionChart" height="300" style="height: 300px !important;"></canvas>
            </div>
        </div>

        <div class="col-lg-3">
            <div class="chart-container border rounded">
                <div class="d-flex justify-content-between align-items-center chart-header mb-4 mt--4">
                    <h5 class="card-title mb-0 mt--1" style="font-size:15px">Flavor Distribution</h5>
                </div>
                <canvas id="flavorChart" height="300"></canvas>
            </div>
        </div>
        <div class="col-lg-4 mb-4">

            <div class="chart-container text-center border rounded" style="padding-left: 0px;padding-right: 0px;">
                <div class="d-flex justify-content-between align-items-center chart-header mb-0" style="margin-left: 0px;margin-right: 0px;">
                    <h5 class="card-title mb-0 mt--1" style="font-size:15px">Ticketing Action Status</h5>
                </div>

                <div class="white_card_body notificationchart" style="max-height: 300px; overflow-y: auto;">
                    <table class="table table-bordered table-striped mb-0" id="ticketingTable">
                        <thead class="table-light" id="ticketingTableHead">
                            <!-- Dynamic Table Header -->
                        </thead>
                        <tbody id="ticketingTableBody">
                            <!-- Dynamic Table Rows -->
                        </tbody>
                    </table>
                </div>
            </div>


        </div>

        <div class="col-lg-4 mb-4">
            <div class="chart-container border rounded">
                <div class="d-flex justify-content-between align-items-center  chart-header mb-4 mt--4">
                    <h5 class="card-title mb-0 mt--1" style="font-size:15px">Purchase Order Trends</h5>
                </div>
                <canvas id="transferStatusChart" height="300"></canvas>
            </div>
        </div>
        <div class="col-lg-4 mb-4">
            <div class="chart-container border rounded">
                <div class="d-flex justify-content-between align-items-center chart-header mb-4 mt--4">
                    <h5 class="card-title mb-0 mt--1" style="font-size:15px">Sales Overview</h5>

                </div>
                <canvas id="salesChart" height="300"></canvas>
            </div>
        </div>
        <div class="col-lg-4 mb-4">
            <div class="chart-container border rounded">
                <div class="d-flex justify-content-between align-items-center chart-header mb-4 mt--4">
                    <h5 class="card-title mb-0 mt--1" style="font-size:15px">Distributor Area-Wise Sales</h5>
                    <!-- <div class="btn-group">
                        <button class="btn btn-sm btn-outline-secondary active">Top 5</button>
                    </div> -->
                </div>
                <canvas id="areaDistributionChart" height="300"></canvas>
            </div>
        </div>



    </div>

    <div class="row mb-2">
        <div class="col-lg-4 mb-4">
            <div class="chart-container border rounded">
                <div class="d-flex justify-content-between align-items-center chart-header mb-3 mt--4">
                    <h5 class="card-title mb-0 mt--1" style="font-size:15px">Payroll Overview</h5>
                    <!-- <div class="btn-group">
                        <button class="btn btn-sm btn-outline-secondary active" id="monthlyBtn">Monthly</button>
                        <button class="btn btn-sm btn-outline-secondary" id="yearlyBtn">Yearly</button>
                    </div> -->
                </div>
                <canvas id="payrollOverviewChart" height="300"></canvas>
            </div>
        </div>

        <div class="col-lg-4 mb-4">
            <div class="chart-container border rounded">
                <div class="d-flex justify-content-between align-items-center chart-header mb-3 mt--4">
                    <h5 class="card-title mb-0 mt--1" style="font-size:15px">Payment & Expense</h5>
                    <!-- <div class="btn-group" role="group" aria-label="Toggle monthly/yearly">
                        <button id="monthlyBtn1" class="btn btn-sm btn-outline-secondary active">Monthly</button>
                        <button id="yearlyBtn1" class="btn btn-sm btn-outline-secondary">Yearly</button>
                    </div> -->
                </div>
                <canvas id="paymentExpenseChart" height="300"></canvas>
            </div>
        </div>
        <div class="col-lg-4 mb-4">
            <div class="chart-container border rounded">
                <div class="d-flex justify-content-between align-items-center  chart-header mb-3 mt--4">
                    <h5 class="card-title mb-0 mt--1" style="font-size:15px">Asset Management Overview</h5>
                    <!-- <div class="btn-group" id="AssetToggle">
                        <button class="btn btn-sm btn-outline-secondary active">Overview</button>
                    </div> -->
                </div>
                <canvas id="assetDoughnutChart" height="300"></canvas>
            </div>
        </div>


    </div>

    <!-- Quality Metrics and Vendor Section -->
    <div class="row">
        <div class="col-lg-12 mt--2">

            <!-- Begin Row -->
            <div class="row">
                <!-- col-lg-8 wrapper -->
                <div class="col-lg-12">
                    <div class="chart-container border rounded">
                        <div class="d-flex justify-content-between align-items-center chart-header mb-2 mt--4">
                            <h5 class="card-title mb-0 mt--1" style="font-size:15px">Quality Metrics</h5>
                            @*                             <button class="btn btn-sm btn-secondary">Export Report</button>
 *@                        </div>
                        <div id="qualityMetricsContainer"></div>
                    </div>

                </div>

            </div>


        </div>

    </div>

    <div class="row mt-4">
        <div class="col-lg-6 mb-4">
            <div class="chart-container border rounded">
                <div class="d-flex justify-content-between align-items-center chart-header mb-3 mt--4">
                    <h5 class="card-title mb-0 mt--1" style="font-size:15px">Vendor & Distributor</h5>
                    <div class="btn-group">
                        <button id="vendorBtn" class="btn btn-sm btn-outline-secondary active">Vendors</button>
                        <button id="franchiseBtn" class="btn btn-sm btn-outline-secondary">Distributor</button>
                    </div>
                </div>
                <div id="vendorFranchiseWrapper" style="overflow-x: auto; width: 100%;">
                    <div id="canvasContainer" style="min-width: 100%;">
                        <canvas id="vendorFranchiseChart" height="215px"></canvas>
                    </div>
                </div>

            </div>
        </div>
        <div class="col-lg-6 mb-4">
            <div class="chart-container border rounded">
                <div class="d-flex justify-content-between align-items-center chart-header mb-3 mt--4">
                    <h5 class="card-title mb-0 mt--1" style="font-size:15px">Distributor Report</h5>
                    <div class="btn-group" role="group" aria-label="Toggle overview/individual">
                        <button id="overviewBtn" class="btn btn-sm btn-outline-secondary active">Overview</button>
                        <button id="individualBtn" class="btn btn-sm btn-outline-secondary">Individual</button>
                    </div>
                </div>
                <div id="overviewChartContainer">
                    <canvas id="overviewDistributorChart"></canvas>
                </div>

                <div id="individualChartContainer" style="display: none;">
                    <div class="d-flex justify-content-end" style="width: 35%; margin-top: -9px;">
                        <select id="distributorSelect" class="form-select mb-2" style="width: 100%;z-index: 999999;">
                        </select>
                    </div>
                    <div style="max-width: 400px; margin: 0 auto;">
                        <canvas id="individualDistributorChart" width="400" height="215px" style="margin-top: -3px !important;"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gaugeJS/dist/gauge.min.js"></script>
<script src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<script src="~/assets/js/daterangepicker.min.js"></script>
<script src="~/js/dashboard.js"></script>


<script>
    const commonOpts = {
        angle: 0.15,
        lineWidth: 0.2,
        radiusScale: 1,
        pointer: {
            length: 0.6,
            strokeWidth: 0.035,
            color: '#000000'
        },
        limitMax: false,
        limitMin: false,
        colorStart: '#6FADCF',
        colorStop: '#8FC0DA',
        strokeColor: '#E0E0E0',
        generateGradient: true,
        highDpiSupport: true
    };

    // Sample Data
    const totalTickets = 100;
    const approvedTickets = 40;
    const pendingTickets = 30;
    const inProgressTickets = 30;

    // Percentages
    const approvedValue = (approvedTickets / totalTickets) * 100;
    const pendingValue = (pendingTickets / totalTickets) * 100;
    const inProgressValue = (inProgressTickets / totalTickets) * 100;

    // Approved Gauge
    const approved = document.getElementById('approvedGauge');
    if (approved) {
        const approvedGauge = new Gauge(approved).setOptions({
            ...commonOpts,
            staticZones: [
                { strokeStyle: "#F03E3E", min: 0, max: 60 },
                { strokeStyle: "#FFDD00", min: 60, max: 80 },
                { strokeStyle: "#30B32D", min: 80, max: 100 }
            ]
        });
        approvedGauge.maxValue = 100;
        approvedGauge.setMinValue(0);
        approvedGauge.animationSpeed = 32;
        approvedGauge.set(approvedValue);

        document.querySelector(".status-label.text-success").innerText =
            `${approvedTickets} Opened Tickets (${approvedValue.toFixed(1)}%)`;
    }

    // Pending Gauge
    const pending = document.getElementById('pendingGauge');
    if (pending) {
        const pendingGauge = new Gauge(pending).setOptions({
            ...commonOpts,
            staticZones: [
                { strokeStyle: "#30B32D", min: 0, max: 60 },
                { strokeStyle: "#FFDD00", min: 60, max: 80 },
                { strokeStyle: "#F03E3E", min: 80, max: 100 }
            ]
        });
        pendingGauge.maxValue = 100;
        pendingGauge.setMinValue(0);
        pendingGauge.animationSpeed = 32;
        pendingGauge.set(pendingValue);

        document.querySelector(".status-label.text-danger").innerText =
            `${pendingTickets} Closed Tickets (${pendingValue.toFixed(1)}%)`;
    }

    // In-Progress Gauge
    const progress = document.getElementById('progressGauge');
    if (progress) {
        const progressGauge = new Gauge(progress).setOptions({
            ...commonOpts,
            staticZones: [
                { strokeStyle: "#007bff", min: 0, max: 100 } // Full blue
            ]
        });
        progressGauge.maxValue = 100;
        progressGauge.setMinValue(0);
        progressGauge.animationSpeed = 32;
        progressGauge.set(inProgressValue);

        document.querySelector(".status-label.text-primary").innerText =
            `${inProgressTickets} In-Progress Tickets (${inProgressValue.toFixed(1)}%)`;
    }
</script>


<script>
    $(document).ready(function () {

        var canView = @access.View.ToString().ToLower();

        if (canView) {
            localStorage.removeItem("UserAccessList");

            var FranchiseMappingId = parseInt(localStorage.getItem('FranchiseId'));
            var category = "UserType";
            var search = null;

            var editData = {
                FranchiseId: FranchiseMappingId,
                Value: 0,
                Category: category,
                Search: search
            };

            Common.ajaxCall("GET", "/UserAccess/GetUserAcces", editData, UserAccessValuesList, null);

            function UserAccessValuesList(response) {
                var parsedUserAccessList = response;
                localStorage.setItem("UserAccessList", JSON.stringify(parsedUserAccessList));
            }
        }
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>



<script>
    // Sample data for notifications (replace with dynamic values if needed)
    const notificationData = {
        received: 120,
        inProgress: 45,
        completed: 60,
        rejected: 15
    };

    const ctxNotif = document.getElementById('notificationStatusChart');

    const notificationStatusChart = new Chart(ctxNotif, {
        type: 'doughnut',
        data: {
            labels: ['Received', 'In Progress', 'Completed', 'Rejected'],
            datasets: [{
                data: [
                    notificationData.received,
                    notificationData.inProgress,
                    notificationData.completed,
                    notificationData.rejected
                ],
                backgroundColor: ['#3498db', '#f1c40f', '#2ecc71', '#e74c3c'],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'right',
                    labels: {
                        boxWidth: 20,
                        padding: 15
                    }
                },
                tooltip: {
                    callbacks: {
                        label: function (context) {
                            const label = context.label || '';
                            const value = context.raw || 0;
                            return `${label}: ${value}`;
                        }
                    }
                }
            }
        }
    });
</script>
<script>
    function toggleActions(button) {
        const menu = button.nextElementSibling;

        // Close all other menus
        document.querySelectorAll('.action_btns').forEach(el => {
            if (el !== menu) {
                el.classList.remove('show-menu');
            }
        });

        // Toggle current
        menu.classList.toggle('show-menu');
    }

    // Hide on outside click
    document.addEventListener('click', function (e) {
        if (!e.target.closest('.position-relative')) {
            document.querySelectorAll('.action_btns').forEach(el => {
                el.classList.remove('show-menu');
            });
        }
    });
</script>







